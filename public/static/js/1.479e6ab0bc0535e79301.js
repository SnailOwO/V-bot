webpackJsonp([1],{Luci:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("fpyS"),n={components:{},data:function(){return{show:!0,extraSetting:"",currentStep:0,level:"",levelObj:{},extenstion:".png",baseEmojiPath:"/static/images/funny_rain/",codeCanvas:{},codeOgc:{},codeRainAry:[],width:0,height:300,emojiNum:13,codeRainNum:0,codeTimeOut:"",stepTimeOut:"",nextStepTimeOut:"",stepTime:"",answer:"",animateStop:"",pasusedShow:!0,isPaused:!0,lastPausedTime:""}},mounted:function(){var t=this.$store.state.activeCode.method;this.levelObj=this.$store.state.activeCode[t]},beforeDestroy:function(){clearTimeout(this.codeTimeOut),clearTimeout(this.stepTimeOut),clearTimeout(this.nextStepTimeOut)},methods:{initCanvas:function(){this.codeCanvas=document.getElementById("codeCanvas"),this.codeCanvas.setAttribute("width",this.width),this.codeOgc=this.codeCanvas.getContext("2d")},preStep:function(){this.currentStep&&(this.currentStep-=1,this.currentStep=this.currentStep<=0?0:this.currentStep)},getCode:function(){if(!this.currentStep){if(!this.levelObj[this.level])return this.$Message.warning(this.$t("login.info.illegalDifficulty")),!1;this.extraSetting=this.levelObj[this.level],this.codeRainNum=this.extraSetting.rainNum}if(3==this.currentStep&&!this.answer)return this.$Message.warning(this.$t("login.info.illegalAnswer")),!1;4==this.currentStep?this.close():this.currentStep+=1},answerPreg:function(t){this.answer=t.replace(/[^0-9]/g,"")},close:function(){this.show=!1,this.$emit("input",!1)},initRain:function(){var t=this,e=this.random(2,5);return{init:function(i){this.r=80,this.x=t.random(0,t.width-this.r),this.y=0,this.speed=e+=t.extraSetting.speed;var s=t.randomEmoji(1,t.emojiNum),n=t.baseEmojiPath+s+t.extenstion;this.img=new Image,this.img.src=n,i.drawImage(this.img,this.x,this.y)},draw:function(t){t.drawImage(this.img,this.x,this.y),this.update(t)},update:function(e){this.y<t.height-this.r?this.y+=this.speed:this.init(t.codeOgc)}}},createRain:function(){for(var t=this,e=0;e<this.codeRainNum;e++)this.stepTimeOut=setTimeout(function(){var e=t.initRain();e.init(t.codeOgc),t.codeRainAry.push(e)},100*e)},move:function(){this.codeOgc.clearRect(0,0,this.width,300);for(var t=0;t<this.codeRainAry.length;t++)this.codeRainAry[t].draw(this.codeOgc);this.animateStop=requestAnimationFrame(this.move)},pasued:function(t){if(t){if(!this.stepTime)return this.$Message.warning(this.$t("login.info.unableToSuspend")),!1;if(this.lastPausedTime&&this.lastPausedTime==this.stepTime)return this.$Message.warning(this.$t("login.info.suspendInterval")),!1}this.isPaused=!1,this.lastPausedTime=this.stepTime,clearTimeout(this.stepTimeOut),window.cancelAnimationFrame(this.animateStop)},go:function(){if(!this.stepTime)return this.$Message.warning(this.$t("login.info.unableToContinue")),!1;this.move(),this.isPaused=!0,this.timeOutMethod()},random:function(t,e){return Math.random()*(e-t)+t},randomEmoji:function(t,e){return Math.floor(Math.random()*(e-t+1)+t)},randomEmojiSrc:function(t,e){return this.baseEmojiPath+this.randomEmoji(t,e)+this.extenstion},timeOutMethod:function(){var t=this;this.stepTimeOut=setTimeout(function(){t.stepTime<=0?(clearTimeout(t.stepTimeOut),t.pasusedShow=!1,t.pasued(!1),t.nextStepTimeOut=setTimeout(function(){t.currentStep+=1},1e3)):(t.stepTime-=1,t.stepTimeOut=setTimeout(function(){t.timeOutMethod()},1e3))},1e3)}},computed:{resizeWidth:function(){return this.width=document.getElementById("rain-code-box").offsetWidth}},watch:{currentStep:function(){var t=this;2==this.currentStep&&(this.$nextTick(function(){t.resizeWidth,t.initCanvas(),t.createRain(),t.move()}),this.stepTime=this.levelObj[this.level].time/1e3,this.timeOutMethod())}},props:["value"]},a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.show?i("div",[i("Modal",{attrs:{"mask-closable":!1,closable:!1,width:"750"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[i("p",{attrs:{slot:"header"},slot:"header"},[i("span",[t._v("\n      "+t._s(this.$t("login.page.activeCodeDialog.title"))+"\n    ")]),t._v(" "),i("label",{staticClass:"close",on:{click:t.close}},[i("Icon",{attrs:{type:"close"}})],1)]),t._v(" "),i("Steps",{attrs:{current:t.currentStep}},[i("Step",{attrs:{title:this.$t("login.page.activeCodeDialog.firstStep")}}),t._v(" "),i("Step",{attrs:{title:this.$t("login.page.activeCodeDialog.secondStep")}}),t._v(" "),i("Step",{attrs:{title:this.$t("login.page.activeCodeDialog.thirdStep")}}),t._v(" "),i("Step",{attrs:{title:this.$t("login.page.activeCodeDialog.fourthStep")}}),t._v(" "),i("Step",{attrs:{title:this.$t("login.page.activeCodeDialog.fifthStep")}})],1),t._v(" "),i("div",{attrs:{id:"rain-code-box"}},[t.currentStep?t._e():i("div",{staticClass:"diffcult-choice-box"},[i("RadioGroup",{model:{value:t.level,callback:function(e){t.level=e},expression:"level"}},[i("Radio",{attrs:{label:this.$t("login.page.activeCodeDialog.simple")}}),t._v(" "),i("Radio",{attrs:{label:this.$t("login.page.activeCodeDialog.middle")}}),t._v(" "),i("Radio",{attrs:{label:this.$t("login.page.activeCodeDialog.hard")}})],1)],1),t._v(" "),1==t.currentStep?i("div",{staticClass:"diffcult-choice-box"},[i("label",[t._v(t._s(this.$t("login.info.rememberEmoji")))]),t._v(" "),i("Avatar",{attrs:{src:t.randomEmojiSrc(1,13)}})],1):t._e(),t._v(" "),2==t.currentStep?i("div",{staticClass:"diffcult-choice-box"},[i("canvas",{attrs:{width:"293",height:"300",id:"codeCanvas"}})]):t._e(),t._v(" "),3==t.currentStep?i("div",{staticClass:"diffcult-choice-box"},[i("label",{staticClass:"questtion-label"},[t._v(t._s(this.$t("login.info.questtion")))]),t._v(" "),i("i-input",{staticStyle:{width:"80px"},attrs:{placeholder:this.$t("login.info.answer"),clearable:""},nativeOn:{keyup:function(e){t.answerPreg(t.answer)}},model:{value:t.answer,callback:function(e){t.answer=e},expression:"answer"}})],1):t._e(),t._v(" "),4==t.currentStep?i("div",{staticClass:"diffcult-choice-box"},[i("label",[t._v("很遗憾!")])]):t._e()]),t._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[2==t.currentStep?i("p",{staticClass:"count-down"},[t._v(t._s(this.$t("login.page.activeCodeDialog.countDown"))+" "+t._s(t.stepTime))]):t._e(),t._v(" "),(2==t.currentStep||2==t.currentStep&&t.pasusedShow)&&t.isPaused?i("Button",{attrs:{type:"info"},on:{click:function(e){t.pasued(!0)}}},[t._v("暂停")]):t._e(),t._v(" "),2!=t.currentStep||t.isPaused?t._e():i("Button",{attrs:{type:"info"},on:{click:t.go}},[t._v("继续")]),t._v(" "),1==t.currentStep?i("Button",{staticStyle:{float:"left"},on:{click:t.preStep}},[t._v(t._s(this.$t("login.page.registerDialog.preStep")))]):t._e(),t._v(" "),2!=t.currentStep?i("Button",{attrs:{type:"primary"},on:{click:t.getCode}},[t._v(t._s(this.$t("login.page.activeCodeDialog.confirm")))]):t._e()],1)],1)],1):t._e()};a._withStripped=!0;var o={render:a,staticRenderFns:[]},r=o;var c=i("VU/8")(n,r,!1,null,null,null);c.options.__file="src\\components\\activeCode\\funnyRainCode.vue";var l=c.exports,h={components:{funnyRain:s.a,funnyRainCode:l},data:function(){return{first_index:0,isNoraml:!1,username:"",password:"",code:"",isRegister:!1,account:"",registerPwd:"",repeatPwd:"",email:"",phone:"",currentStep:0,isActiveCode:!1}},created:function(){},mounted:function(){},methods:{login:function(){if(this.isNoraml){if(!this.code)return this.$Message.warning(this.$t("login.info.codeIsEmpty")),!1}else{if(!this.username)return this.$Message.warning(this.$t("login.info.usernameIsEmpty")),!1;if(!this.password)return this.$Message.warning(this.$t("login.info.pwdIsEmpty")),!1}var t={};t.username=this.username,t.password=this.password,t.method=this.code,this.$axios("/login",t).then(function(t){console.log(t)}).catch(function(t){console.log(t)})},showRegister:function(){this.isRegister=!0},register:function(){if(0==this.currentStep){if(!this.account)return this.$Message.warning(this.$t("login.info.accountIsEmpty")),!1;if(this.account.length>32)return this.$Message.warning(this.$t("login.info.accountLengthIllegal")),!1}if(1==this.currentStep){if(!this.registerPwd)return this.$Message.warning(this.$t("login.info.pwdIsEmpty")),!1;if(this.registerPwd!=this.repeatPwd)return this.$Message.warning(this.$t("login.info.twicePwdIsWrong")),!1}if(2==this.currentStep){if(!this.email)return this.$Message.warning(this.$t("login.info.emailIsEmpty")),!1;if(!/^(\w-*\.*)+@(\w-?)+(\.\w{2,})+$/.test(this.email))return this.$Message.warning(this.$t("login.info.emailIsIllegal")),!1}if(3==this.currentStep&&this.phone){if(!/^1\d{10}$/.test(this.phone))return this.$Message.warning(this.$t("login.info.phoneIsIllegal")),!1}3==this.currentStep?alert("注册成功"):this.currentStep+=1},preStep:function(){this.currentStep&&(this.currentStep-=1,this.currentStep=this.currentStep<=0?0:this.currentStep)},showActiveCode:function(){this.isActiveCode=!this.isActiveCode}},watch:{isNoraml:function(){!1===this.isNoraml&&(this.username="",this.password="",this.code="")},isRegister:function(){this.isRegister||(this.email="",this.phone="",this.account="",this.repeatPwd="",this.registerPwd="",this.currentStep=0)}},props:[]},u=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"login"}},[i("ul",{staticClass:"login-header"},[i("li",{on:{click:t.showRegister}},[t._v(t._s(this.$t("login.page.register")))]),t._v(" "),i("li",{on:{click:t.showActiveCode}},[t._v(t._s(this.$t("login.page.getActiveCode")))])]),t._v(" "),i("div",{staticClass:"login-content"},[i("div",{staticClass:"login-carousel"},[i("Carousel",{attrs:{autoplay:"",loop:""},model:{value:t.first_index,callback:function(e){t.first_index=e},expression:"first_index"}},[i("CarouselItem",[i("div",{staticClass:"carousel-item"},[i("img",{attrs:{src:"/static/images/advertisement/base_ad1.jpg"}})])]),t._v(" "),i("CarouselItem",[i("div",{staticClass:"carousel-item"},[i("img",{attrs:{src:"/static/images/advertisement/base_ad1.jpg"}})])]),t._v(" "),i("CarouselItem",[i("div",{staticClass:"carousel-item"},[i("img",{attrs:{src:"/static/images/advertisement/base_ad3.jpg"}})])]),t._v(" "),i("CarouselItem",[i("div",{staticClass:"carousel-item"},[i("img",{attrs:{src:"/static/images/advertisement/base_ad3.jpg"}})])])],1)],1),t._v(" "),i("div",{staticClass:"switch-box"},[i("label",[t._v(t._s(this.$t("login.page.loginMethod")))]),t._v(" "),i("i-switch",{model:{value:t.isNoraml,callback:function(e){t.isNoraml=e},expression:"isNoraml"}})],1),t._v(" "),t.isNoraml?i("div",{staticClass:"code-way"},[i("div",{staticClass:"name-box"},[i("i-input",{staticClass:"login-input",attrs:{placeholder:this.$t("login.page.code")},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}})],1)]):i("div",{staticClass:"login-way"},[i("div",{staticClass:"name-box"},[i("i-input",{staticClass:"login-input",attrs:{placeholder:this.$t("login.page.username")},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),t._v(" "),i("div",{staticClass:"pwd-box"},[i("i-input",{staticClass:"login-input",attrs:{type:"password",placeholder:this.$t("login.page.password")},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)]),t._v(" "),i("div",{staticClass:"login-btn",on:{click:t.login}},[t._v(t._s(this.$t("login.page.login")))])]),t._v(" "),i("funnyRain"),t._v(" "),t.isActiveCode?i("funnyRainCode",{model:{value:t.isActiveCode,callback:function(e){t.isActiveCode=e},expression:"isActiveCode"}}):t._e(),t._v(" "),i("Modal",{attrs:{title:this.$t("login.page.registerDialog.title"),"mask-closable":!1},model:{value:t.isRegister,callback:function(e){t.isRegister=e},expression:"isRegister"}},[i("Steps",{attrs:{current:t.currentStep}},[i("Step",{attrs:{title:this.$t("login.page.registerDialog.firstStep")}}),t._v(" "),i("Step",{attrs:{title:this.$t("login.page.registerDialog.secondStep")}}),t._v(" "),i("Step",{attrs:{title:this.$t("login.page.registerDialog.thirdStep")}}),t._v(" "),i("Step",{attrs:{title:this.$t("login.page.registerDialog.fourthStep")}})],1),t._v(" "),i("div",{attrs:{id:"register-box"}},[t.currentStep?t._e():i("div",{staticClass:"account-box"},[i("i-input",{attrs:{placeholder:this.$t("login.page.registerDialog.account")},model:{value:t.account,callback:function(e){t.account=e},expression:"account"}})],1),t._v(" "),1==t.currentStep?i("div",{staticClass:"pwd-box"},[i("i-input",{attrs:{type:"password",placeholder:this.$t("login.page.registerDialog.registerPwd")},model:{value:t.registerPwd,callback:function(e){t.registerPwd=e},expression:"registerPwd"}})],1):t._e(),t._v(" "),1==t.currentStep?i("div",{staticClass:"pwd-box"},[i("i-input",{attrs:{type:"password",placeholder:this.$t("login.page.registerDialog.repeatPwd")},model:{value:t.repeatPwd,callback:function(e){t.repeatPwd=e},expression:"repeatPwd"}})],1):t._e(),t._v(" "),2==t.currentStep?i("div",{staticClass:"email-box"},[i("i-input",{attrs:{placeholder:this.$t("login.page.registerDialog.email")},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1):t._e(),t._v(" "),3==t.currentStep?i("div",{staticClass:"phone-box"},[i("i-input",{attrs:{placeholder:this.$t("login.page.registerDialog.phone")},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}})],1):t._e()]),t._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[t.currentStep?i("Button",{staticStyle:{float:"left"},on:{click:t.preStep}},[t._v(t._s(this.$t("login.page.registerDialog.preStep")))]):t._e(),t._v(" "),i("Button",{attrs:{type:"primary"},on:{click:t.register}},[t._v(t._s(this.$t("login.page.registerDialog.confirm")))])],1)],1)],1)};u._withStripped=!0;var d={render:u,staticRenderFns:[]},p=d;var g=i("VU/8")(h,p,!1,null,null,null);g.options.__file="src\\pages\\login.vue";e.default=g.exports},fpyS:function(t,e,i){"use strict";var s={data:function(){return{width:0,height:0,canvas:{},oGc:{},emojiNum:13,rainAry:[],rainNum:150,extenstion:".png",baseEmojiPath:"/static/images/funny_rain/",timeOut:"",level:this.$store.state.level}},created:function(){},mounted:function(){this.watchWidth,this.watchHeight,this.initCanvas(),this.createRain(),this.move()},beforeDestroy:function(){clearTimeout(this.timeOut)},methods:{initCanvas:function(){this.canvas=document.getElementById("canvas"),this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this.oGc=this.canvas.getContext("2d")},initRain:function(){var t=this,e=this.random(2,5);return{init:function(i){this.r=80,this.x=t.random(0,t.width-this.r),this.y=0,this.speed=e+=t.level;var s=t.randomEmoji(1,t.emojiNum),n=t.baseEmojiPath+s+t.extenstion;this.img=new Image,this.img.src=n,i.drawImage(this.img,this.x,this.y)},draw:function(t){t.drawImage(this.img,this.x,this.y),this.update(t)},update:function(e){this.y<t.height-this.r?this.y+=this.speed:this.init(t.oGc)}}},createRain:function(){for(var t=this,e=0;e<this.rainNum;e++)this.timeOut=setTimeout(function(){var e=t.initRain();e.init(t.oGc),t.rainAry.push(e)},100*e)},move:function(){this.oGc.clearRect(0,0,this.width,this.height);for(var t=0;t<this.rainAry.length;t++)this.rainAry[t].draw(this.oGc);requestAnimationFrame(this.move)},random:function(t,e){return Math.random()*(e-t)+t},randomEmoji:function(t,e){return Math.floor(Math.random()*(e-t+1)+t)}},computed:{watchWidth:function(){return this.width=window.innerWidth},watchHeight:function(){return this.height=window.innerHeight}},props:[]},n=function(){var t=this.$createElement;return(this._self._c||t)("canvas",{attrs:{width:"500",height:"500",id:"canvas"}})};n._withStripped=!0;var a={render:n,staticRenderFns:[]},o=a;var r=i("VU/8")(s,o,!1,null,null,null);r.options.__file="src\\components\\login\\funnyRain.vue";e.a=r.exports}});
//# sourceMappingURL=1.479e6ab0bc0535e79301.js.map